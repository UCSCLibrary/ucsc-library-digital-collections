<% options = default_options %>

<% authority_options = property['vocabularies'].map{|voc| [voc['authority'].titleize+" "+voc['subauthority'].titleize, "/authorities/search/#{voc['authority']}/#{voc['subauthority']}"]}  %>

<% data = {'autocomplete-url' => authority_options.first.last,
           'autocomplete' => key,
           'authority-select' => "#{key.to_s.underscore}_auth_select}",
           'authorities' => authority_options } %>
<%# options[:as] = property['input'].to_sym %>
<% options[:as] = :multi_controlled_vocabulary %>
<% options[:input_html] = {class: "form-control #{key.to_s.underscore}-input", data: data} %>
<% options[:wrapper_html] = {data: data.merge!({'field-name' => key})} %>
<%= f.input key, options %>
