<% options = default_options %>

<% authority_select = property['vocabularies'].map{|voc| [voc['authority'].titleize+" "+voc['subauthority'].titleize, "/authorities/search/#{voc['authority']}/#{voc['subauthority']}"]}  %>

<% data = {'autocomplete-url' => authority_select.first.last,
           'autocomplete' => key,
           'authority-select' => authority_select} %>
<%# options[:as] = property['input'].to_sym %>
<%# options[:as] = :autosuggest %>
<% options[:as] = :controlled_vocabulary %>
<% options[:input_html] = {class: "form-control #{key.to_s.underscore}-input", data: data} %>
<% options[:wrapper_html] = {data: data.merge!({'field-name' => key})} %>

<% select_options = {as: :select, include_blank: :true, collection: authority_select} %>

<%= f.input key, options %>
