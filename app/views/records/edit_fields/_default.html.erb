<% wrk = (defined? curation_concern) ? curation_concern : @collection %>
<% schema = ScoobySnacks::METADATA_SCHEMA %>
<% field = schema.get_field(key.to_s)  %>
<% unless field.nil?  %>
    <% options = {
        required: f.object.required?(key),
        input_html: { class: 'form-control' }} %>
    <% options[:label] = field.label %>
    <% options[:hint] = field.definition if field.definition %>
    <% input_type = field.input.underscore %>
    <% if field.controlled? %>
        <%= render partial: "records/edit_fields/controlled_vocab", locals: {property: field, f: f, key: key, input_style: input_type, default_options: options}  %>
    <% else %>
        <% input_type = 'scalar' if input_type == "default" %>
        <%= render partial: "records/edit_fields/#{input_type}", locals: {property: field, f: f, key: key, default_options: options}  %>
    <% end %>
<% end %>
