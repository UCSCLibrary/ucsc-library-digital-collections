<% options = default_options %>

<% authority_options = (property.vocabularies || [property.vocabulary]).map{|voc| [voc['authority'].titleize+" "+voc['subauthority'].titleize, "/authorities/search/#{voc['authority']}/#{voc['subauthority']}"]}  %>

<% data = {'autocomplete-url' => authority_options.first.last,
           'autocomplete' => key,
           'authority-select' => "#{key.to_s.underscore}_auth_select",
           'authorities' => authority_options,
           'input-style' => input_style,
           'persisted' => true } %>
<% options[:as] = :controlled_vocab %>
<% options[:input_html] = {class: "form-control #{key.to_s.underscore}-input", data: data} %>
<% options[:wrapper_html] = {data: data.merge!({'field-name' => key})} %>
<%= f.input key, options %>
